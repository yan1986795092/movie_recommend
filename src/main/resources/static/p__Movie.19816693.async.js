"use strict";(self.webpackChunkyupi_antd_frontend_init=self.webpackChunkyupi_antd_frontend_init||[]).push([[882],{51042:function(ee,D,n){var R=n(1413),i=n(67294),w=n(42110),u=n(91146),x=function(j,I){return i.createElement(u.Z,(0,R.Z)((0,R.Z)({},j),{},{ref:I,icon:w.Z}))},c=i.forwardRef(x);D.Z=c},96347:function(ee,D,n){n.r(D),n.d(D,{default:function(){return e}});var R=n(97857),i=n.n(R),w=n(15009),u=n.n(w),x=n(99289),c=n.n(x),P=n(5574),j=n.n(P),I=n(31912),F=n(82130),N=n(86745),h=n(2453),Z=n(28248),B=n(67294),s=n(85893),Q=function(){var A=c()(u()().mark(function l(p){var v;return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return v=h.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),t.prev=1,t.next=4,(0,I.yK)(p);case 4:return v(),h.ZP.success("\u521B\u5EFA\u6210\u529F"),t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t.catch(1),v(),h.ZP.error("\u521B\u5EFA\u5931\u8D25\uFF0C"+t.t0.message),t.abrupt("return",!1);case 14:case"end":return t.stop()}},l,null,[[1,9]])}));return function(p){return A.apply(this,arguments)}}(),K=function(l){var p=l.visible,v=l.columns,_=l.onSubmit,t=l.onCancel;return(0,s.jsx)(Z.Z,{destroyOnClose:!0,title:"\u521B\u5EFA",open:p,footer:null,onCancel:function(){t==null||t()},children:(0,s.jsx)(F.Z,{type:"form",columns:v,onSubmit:function(){var C=c()(u()().mark(function U(M){var f;return u()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,Q(M);case 2:f=S.sent,f&&(_==null||_(M));case 4:case"end":return S.stop()}},U)}));return function(U){return C.apply(this,arguments)}}()})})},ne=K,L=function(){var A=c()(u()().mark(function l(p){var v;return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return v=h.ZP.loading("\u6B63\u5728\u66F4\u65B0"),t.prev=1,t.next=4,(0,I.AU)(p);case 4:return v(),h.ZP.success("\u66F4\u65B0\u6210\u529F"),t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t.catch(1),v(),h.ZP.error("\u66F4\u65B0\u5931\u8D25\uFF0C"+t.t0.message),t.abrupt("return",!1);case 14:case"end":return t.stop()}},l,null,[[1,9]])}));return function(p){return A.apply(this,arguments)}}(),H=function(l){var p=l.oldData,v=l.visible,_=l.columns,t=l.onSubmit,C=l.onCancel;return p?(0,s.jsx)(Z.Z,{destroyOnClose:!0,title:"\u66F4\u65B0",open:v,footer:null,onCancel:function(){C==null||C()},children:(0,s.jsx)(F.Z,{type:"form",columns:_,form:{initialValues:p},onSubmit:function(){var U=c()(u()().mark(function M(f){var G;return u()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,L(i()(i()({},f),{},{movieId:p==null?void 0:p.movieId}));case 2:G=E.sent,G&&(t==null||t(f));case 4:case"end":return E.stop()}},M)}));return function(M){return U.apply(this,arguments)}}()})}):(0,s.jsx)(s.Fragment,{})},V=H,J=n(51042),W=n(6110),a=n(42075),r=n(25043),o=n(14726),b=function(){var l=(0,B.useState)(!1),p=j()(l,2),v=p[0],_=p[1],t=(0,B.useState)(!1),C=j()(t,2),U=C[0],M=C[1],f=(0,B.useRef)(),G=(0,B.useState)(),S=j()(G,2),E=S[0],te=S[1],ue=function(){var T=c()(u()().mark(function m(y){var g,k;return u()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(g=h.ZP.loading("\u6B63\u5728\u5220\u9664"),y){d.next=3;break}return d.abrupt("return",!0);case 3:return d.prev=3,d.next=6,(0,I.G0)({id:y.movieId});case 6:return g(),h.ZP.success("\u5220\u9664\u6210\u529F"),f==null||(k=f.current)===null||k===void 0||k.reload(),d.abrupt("return",!0);case 12:return d.prev=12,d.t0=d.catch(3),g(),h.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C"+d.t0.message),d.abrupt("return",!1);case 17:case"end":return d.stop()}},m,null,[[3,12]])}));return function(y){return T.apply(this,arguments)}}(),X=[{title:"\u7535\u5F71\u7167\u7247",dataIndex:"local",hideInSearch:!0,render:function(m,y){return(0,s.jsx)("img",{src:"/movie/".concat(y.local),alt:"\u56FE\u7247",style:{width:"70%",height:"auto"}})}},{title:"\u7535\u5F71Id",dataIndex:"movieId",valueType:"text",hideInForm:!0,hideInSearch:!0,hideInTable:!0},{title:"\u521B\u5EFA\u7528\u6237",dataIndex:"userId",valueType:"text",hideInForm:!0,hideInSearch:!0},{title:"\u7535\u5F71\u540D",dataIndex:"name",valueType:"text"},{title:"\u5BFC\u6F14",dataIndex:"director",valueType:"text",hideInSearch:!0},{title:"\u6F14\u5458",dataIndex:"actors",valueType:"text",hideInTable:!0,hideInSearch:!0},{title:"\u7C7B\u578B",dataIndex:"type",valueType:"text"},{title:"\u4E0A\u6620\u65F6\u95F4",dataIndex:"releaseDate",valueType:"text",hideInForm:!0,hideInSearch:!0,hideInTable:!0},{title:"\u7535\u5F71\u65F6\u957F",dataIndex:"runtime",valueType:"text",hideInSearch:!0},{title:"\u70B9\u8D5E\u6570",dataIndex:"thumbNum",valueType:"text",hideInForm:!0,hideInSearch:!0},{title:"\u6536\u85CF\u6570",dataIndex:"favourNum",valueType:"text",hideInForm:!0,hideInSearch:!0},{title:"\u7B80\u4ECB",dataIndex:"tags",valueType:"text",hideInForm:!0,hideInTable:!0,hideInSearch:!0},{title:"\u521B\u5EFA\u65F6\u95F4",sorter:!0,dataIndex:"createTime",valueType:"dateTime",hideInSearch:!0,hideInForm:!0},{title:"\u66F4\u65B0\u65F6\u95F4",sorter:!0,dataIndex:"updateTime",valueType:"dateTime",hideInSearch:!0,hideInForm:!0},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(m,y){return(0,s.jsxs)(a.Z,{size:"middle",children:[(0,s.jsx)(r.Z.Link,{onClick:function(){te(y),M(!0)},children:"\u4FEE\u6539"}),(0,s.jsx)(r.Z.Link,{type:"danger",onClick:function(){return ue(y)},children:"\u5220\u9664"})]})}}];return(0,s.jsxs)(W._z,{children:[(0,s.jsx)(F.Z,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:f,rowKey:"key",search:{labelWidth:120},toolBarRender:function(){return[(0,s.jsxs)(o.ZP,{type:"primary",onClick:function(){_(!0)},children:[(0,s.jsx)(J.Z,{})," \u65B0\u5EFA"]},"primary")]},request:function(){var T=c()(u()().mark(function m(y,g,k){var z,d,Y,re,q,O,ae;return u()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return Y=(z=Object.keys(g))===null||z===void 0?void 0:z[0],re=(d=g==null?void 0:g[Y])!==null&&d!==void 0?d:void 0,$.next=4,(0,I.RF)(i()(i()({},y),{},{sortField:Y,sortOrder:re},k));case 4:return q=$.sent,O=q.data,ae=q.code,$.abrupt("return",{success:ae===0,data:(O==null?void 0:O.records)||[],total:Number(O==null?void 0:O.total)||0});case 8:case"end":return $.stop()}},m)}));return function(m,y,g){return T.apply(this,arguments)}}(),columns:X}),(0,s.jsx)(ne,{visible:v,columns:X,onSubmit:function(){var m;_(!1),(m=f.current)===null||m===void 0||m.reload()},onCancel:function(){_(!1)}}),(0,s.jsx)(V,{visible:U,columns:X,oldData:E,onSubmit:function(){var m;M(!1),te(void 0),(m=f.current)===null||m===void 0||m.reload()},onCancel:function(){M(!1)}})]})},e=b},31912:function(ee,D,n){n.d(D,{AU:function(){return J},G0:function(){return F},P2:function(){return h},Qn:function(){return H},RF:function(){return B},vV:function(){return Q},yK:function(){return j}});var R=n(15009),i=n.n(R),w=n(97857),u=n.n(w),x=n(99289),c=n.n(x),P=n(86745);function j(a,r){return I.apply(this,arguments)}function I(){return I=c()(i()().mark(function a(r,o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,P.request)("/movie/add",u()({method:"POST",headers:{"Content-Type":"application/json"},data:r},o||{})));case 1:case"end":return e.stop()}},a)})),I.apply(this,arguments)}function F(a,r){return N.apply(this,arguments)}function N(){return N=c()(i()().mark(function a(r,o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,P.request)("/movie/delete",u()({method:"POST",headers:{"Content-Type":"application/json"},data:r},o||{})));case 1:case"end":return e.stop()}},a)})),N.apply(this,arguments)}function h(a,r){return Z.apply(this,arguments)}function Z(){return Z=c()(i()().mark(function a(r,o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,P.request)("/movie/get/vo",u()({method:"GET",params:u()({},r)},o||{})));case 1:case"end":return e.stop()}},a)})),Z.apply(this,arguments)}function B(a,r){return s.apply(this,arguments)}function s(){return s=c()(i()().mark(function a(r,o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,P.request)("/movie/list/page",u()({method:"POST",headers:{"Content-Type":"application/json"},data:r},o||{})));case 1:case"end":return e.stop()}},a)})),s.apply(this,arguments)}function Q(a,r){return K.apply(this,arguments)}function K(){return K=c()(i()().mark(function a(r,o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,P.request)("/movie/list/page/vo",u()({method:"POST",headers:{"Content-Type":"application/json"},data:r},o||{})));case 1:case"end":return e.stop()}},a)})),K.apply(this,arguments)}function ne(a,r){return L.apply(this,arguments)}function L(){return L=_asyncToGenerator(_regeneratorRuntime().mark(function a(r,o){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/movie/my/list/page/vo",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},o||{})));case 1:case"end":return e.stop()}},a)})),L.apply(this,arguments)}function H(a,r){return V.apply(this,arguments)}function V(){return V=c()(i()().mark(function a(r,o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,P.request)("/movie/spider",u()({method:"POST",headers:{"Content-Type":"application/json"},data:r},o||{})));case 1:case"end":return e.stop()}},a)})),V.apply(this,arguments)}function J(a,r){return W.apply(this,arguments)}function W(){return W=c()(i()().mark(function a(r,o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,P.request)("/movie/update",u()({method:"POST",headers:{"Content-Type":"application/json"},data:r},o||{})));case 1:case"end":return e.stop()}},a)})),W.apply(this,arguments)}}}]);
