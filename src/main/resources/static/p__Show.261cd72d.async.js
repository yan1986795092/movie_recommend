"use strict";(self.webpackChunkyupi_antd_frontend_init=self.webpackChunkyupi_antd_frontend_init||[]).push([[992],{81022:function(Y,U,e){e.r(U),e.d(U,{default:function(){return q}});var S=e(15009),n=e.n(S),O=e(99289),d=e.n(O),B=e(5574),p=e.n(B),i=e(67294),F=e(96974),g=e(31912),K=e(6110),m=e(38345),E=e(86250),f=e(25043),_=e(14726),c=e(19207),y=e(42075),P=e(71230),o=e(15746),b=e(55054),$=e(65429),x=e(75750),k=e(27248),I=e(24474),a=e(97857),s=e.n(a),l=e(86745);function j(V,W){return t.apply(this,arguments)}function t(){return t=d()(n()().mark(function V(W,w){return n()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.abrupt("return",(0,l.request)("/movie_thumb/",s()({method:"POST",headers:{"Content-Type":"application/json"},data:W},w||{})));case 1:case"end":return T.stop()}},V)})),t.apply(this,arguments)}var r=e(85893),z=["\u4E0D\u597D\u770B","\u4E00\u822C","\u8FD8\u884C","\u7CBE\u5F69","\u4E94\u661F\u597D\u8BC4"],X=function(){var W=(0,i.useState)(3),w=p()(W,2),G=w[0],T=w[1],ee=(0,F.UO)(),Z=ee.movieId,te=(0,i.useState)(null),Q=p()(te,2),v=Q[0],re=Q[1],ne=(0,i.useState)(localStorage.getItem("liked")==="true"),H=p()(ne,2),R=H[0],ae=H[1],se=(0,i.useState)(localStorage.getItem("favorited")==="true"),J=p()(se,2),A=J[0],ue=J[1],N=function(){var L=d()(n()().mark(function M(){var C,D;return n()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(h.prev=0,!Z){h.next=10;break}return h.next=4,(0,g.P2)({id:Z});case 4:C=h.sent,D=C.data,console.log("Movie detail page rendered. Movie ID:",D),D?re(D):console.error("No movie data received from the server."),h.next=11;break;case 10:console.error("No movie ID provided.");case 11:h.next=16;break;case 13:h.prev=13,h.t0=h.catch(0),console.error("Error fetching movie data:",h.t0);case 16:case"end":return h.stop()}},M,null,[[0,13]])}));return function(){return L.apply(this,arguments)}}();(0,i.useEffect)(function(){N()},[Z]),(0,i.useEffect)(function(){localStorage.setItem("liked",String(R))},[R]),(0,i.useEffect)(function(){localStorage.setItem("favorited",String(A))},[A]);var ie=function(){var L=d()(n()().mark(function M(){var C;return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,C={movieId:Z},u.next=4,j(C);case 4:return ae(!R),u.next=7,N();case 7:u.next=12;break;case 9:u.prev=9,u.t0=u.catch(0),console.error("Failed to add thumb:",u.t0);case 12:case"end":return u.stop()}},M,null,[[0,9]])}));return function(){return L.apply(this,arguments)}}(),oe=function(){var L=d()(n()().mark(function M(){var C;return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,C={movieId:Z},u.next=4,(0,I.Y4)(C);case 4:return ue(!A),u.next=7,N();case 7:u.next=12;break;case 9:u.prev=9,u.t0=u.catch(0),console.error("Failed to add favorite:",u.t0);case 12:case"end":return u.stop()}},M,null,[[0,9]])}));return function(){return L.apply(this,arguments)}}();return(0,r.jsx)("div",{className:"movie-detail",children:v?(0,r.jsx)("div",{style:{background:"#F5F7FA"},children:(0,r.jsx)(K._z,{header:{title:"".concat(v.name)},children:(0,r.jsxs)(m.Z,{direction:"column",ghost:!0,gutter:[0,16],children:[(0,r.jsxs)(m.Z,{gutter:18,ghost:!0,children:[(0,r.jsx)(m.Z,{colSpan:17.5,children:(0,r.jsxs)(E.Z,{justify:"space-between",children:[(0,r.jsx)("img",{src:"/movie/".concat(v.local),alt:"\u7535\u5F71\u7167\u7247",style:{width:"70",height:"65"}}),(0,r.jsxs)(E.Z,{vertical:!0,align:"flex-end",justify:"space-between",style:{padding:50},children:[(0,r.jsxs)(f.Z.Title,{level:5,children:["\u5BFC\u6F14: ",v.director," ",(0,r.jsx)("br",{}),"\u7C7B\u578B: ",v.type," ",(0,r.jsx)("br",{}),"\u6F14\u5458: ",v.actors," ",(0,r.jsx)("br",{}),"\u7535\u5F71\u65F6\u957F: ",v.runtime," ",(0,r.jsx)("br",{}),"\u4E0A\u6620\u65F6\u95F4: ",v.releaseDate,(0,r.jsx)("br",{}),"\u8C46\u74E3\u8BC4\u5206: ",v.ratingNum," ",(0,r.jsx)("br",{})]}),(0,r.jsx)(_.ZP,{type:"primary",href:v.movieUrl,target:"_blank",children:"\u76F4\u8FBE\u94FE\u63A5"})]})]})}),(0,r.jsx)(m.Z,{colSpan:8,children:(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[(0,r.jsx)(m.Z,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)(f.Z.Title,{level:4,children:"\u6211\u7684\u8BC4\u5206\uFF1A"}),(0,r.jsxs)(E.Z,{gap:"middle",vertical:!0,children:[(0,r.jsx)(c.Z,{tooltips:z,onChange:T,value:G}),G?(0,r.jsx)("span",{children:z[G-1]}):null]})]})}),(0,r.jsxs)(y.Z,{children:[(0,r.jsx)(_.ZP,{type:R?"primary":"default",icon:(0,r.jsx)($.Z,{}),onClick:ie,children:"\u70B9\u8D5E"}),(0,r.jsx)(_.ZP,{type:A?"primary":"default",icon:(0,r.jsx)(x.Z,{}),onClick:oe,children:"\u6536\u85CF"})]}),(0,r.jsx)(m.Z,{children:(0,r.jsx)("div",{children:(0,r.jsxs)(P.Z,{gutter:16,children:[(0,r.jsx)(o.Z,{span:12,children:(0,r.jsx)(b.Z,{title:"\u70B9\u8D5E\u6570",value:v.thumbNum,prefix:(0,r.jsx)($.Z,{})})}),(0,r.jsx)(o.Z,{span:12,children:(0,r.jsx)(b.Z,{title:"\u6536\u85CF\u6570",value:v.favourNum,prefix:(0,r.jsx)(k.Z,{})})})]})})})]})})]}),(0,r.jsx)(m.Z,{title:"\u7535\u5F71\u7B80\u4ECB",children:v.tags})]})})}):(0,r.jsx)("p",{children:"No movie data found."})})},q=X},31912:function(Y,U,e){e.d(U,{AU:function(){return k},G0:function(){return K},P2:function(){return E},Qn:function(){return $},RF:function(){return _},vV:function(){return y},yK:function(){return F}});var S=e(15009),n=e.n(S),O=e(97857),d=e.n(O),B=e(99289),p=e.n(B),i=e(86745);function F(a,s){return g.apply(this,arguments)}function g(){return g=p()(n()().mark(function a(s,l){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.request)("/movie/add",d()({method:"POST",headers:{"Content-Type":"application/json"},data:s},l||{})));case 1:case"end":return t.stop()}},a)})),g.apply(this,arguments)}function K(a,s){return m.apply(this,arguments)}function m(){return m=p()(n()().mark(function a(s,l){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.request)("/movie/delete",d()({method:"POST",headers:{"Content-Type":"application/json"},data:s},l||{})));case 1:case"end":return t.stop()}},a)})),m.apply(this,arguments)}function E(a,s){return f.apply(this,arguments)}function f(){return f=p()(n()().mark(function a(s,l){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.request)("/movie/get/vo",d()({method:"GET",params:d()({},s)},l||{})));case 1:case"end":return t.stop()}},a)})),f.apply(this,arguments)}function _(a,s){return c.apply(this,arguments)}function c(){return c=p()(n()().mark(function a(s,l){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.request)("/movie/list/page",d()({method:"POST",headers:{"Content-Type":"application/json"},data:s},l||{})));case 1:case"end":return t.stop()}},a)})),c.apply(this,arguments)}function y(a,s){return P.apply(this,arguments)}function P(){return P=p()(n()().mark(function a(s,l){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.request)("/movie/list/page/vo",d()({method:"POST",headers:{"Content-Type":"application/json"},data:s},l||{})));case 1:case"end":return t.stop()}},a)})),P.apply(this,arguments)}function o(a,s){return b.apply(this,arguments)}function b(){return b=_asyncToGenerator(_regeneratorRuntime().mark(function a(s,l){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/movie/my/list/page/vo",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:s},l||{})));case 1:case"end":return t.stop()}},a)})),b.apply(this,arguments)}function $(a,s){return x.apply(this,arguments)}function x(){return x=p()(n()().mark(function a(s,l){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.request)("/movie/spider",d()({method:"POST",headers:{"Content-Type":"application/json"},data:s},l||{})));case 1:case"end":return t.stop()}},a)})),x.apply(this,arguments)}function k(a,s){return I.apply(this,arguments)}function I(){return I=p()(n()().mark(function a(s,l){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.request)("/movie/update",d()({method:"POST",headers:{"Content-Type":"application/json"},data:s},l||{})));case 1:case"end":return t.stop()}},a)})),I.apply(this,arguments)}},24474:function(Y,U,e){e.d(U,{Y4:function(){return F},_L:function(){return E}});var S=e(15009),n=e.n(S),O=e(97857),d=e.n(O),B=e(99289),p=e.n(B),i=e(86745);function F(_,c){return g.apply(this,arguments)}function g(){return g=p()(n()().mark(function _(c,y){return n()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,i.request)("/movie_favour/",d()({method:"POST",headers:{"Content-Type":"application/json"},data:c},y||{})));case 1:case"end":return o.stop()}},_)})),g.apply(this,arguments)}function K(_,c){return m.apply(this,arguments)}function m(){return m=_asyncToGenerator(_regeneratorRuntime().mark(function _(c,y){return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",request("/movie_favour/list/page",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:c},y||{})));case 1:case"end":return o.stop()}},_)})),m.apply(this,arguments)}function E(_,c){return f.apply(this,arguments)}function f(){return f=p()(n()().mark(function _(c,y){return n()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,i.request)("/movie_favour/my/list/page",d()({method:"POST",headers:{"Content-Type":"application/json"},data:c},y||{})));case 1:case"end":return o.stop()}},_)})),f.apply(this,arguments)}}}]);
