"use strict";(self.webpackChunkyupi_antd_frontend_init=self.webpackChunkyupi_antd_frontend_init||[]).push([[971],{51042:function(w,O,n){var E=n(1413),P=n(67294),U=n(42110),l=n(91146),$=function(b,I){return P.createElement(l.Z,(0,E.Z)((0,E.Z)({},b),{},{ref:I,icon:U.Z}))},C=P.forwardRef($);O.Z=C},38782:function(w,O,n){n.r(O),n.d(O,{default:function(){return ae}});var E=n(97857),P=n.n(E),U=n(15009),l=n.n(U),$=n(99289),C=n.n($),K=n(5574),b=n.n(K),I=n(25362),F=n(82130),ue=n(86745),v=n(2453),V=n(28248),A=n(67294),t=n(85893),H=function(){var T=C()(l()().mark(function r(i){var s;return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=v.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),e.prev=1,e.next=4,(0,I.T4)(i);case 4:return s(),v.ZP.success("\u521B\u5EFA\u6210\u529F"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),s(),v.ZP.error("\u521B\u5EFA\u5931\u8D25\uFF0C"+e.t0.message),e.abrupt("return",!1);case 14:case"end":return e.stop()}},r,null,[[1,9]])}));return function(i){return T.apply(this,arguments)}}(),J=function(r){var i=r.visible,s=r.columns,o=r.onSubmit,e=r.onCancel;return(0,t.jsx)(V.Z,{destroyOnClose:!0,title:"\u521B\u5EFA",open:i,footer:null,onCancel:function(){e==null||e()},children:(0,t.jsx)(F.Z,{type:"form",columns:s,onSubmit:function(){var f=C()(l()().mark(function S(m){var d;return l()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,H(m);case 2:d=h.sent,d&&(o==null||o(m));case 4:case"end":return h.stop()}},S)}));return function(S){return f.apply(this,arguments)}}()})})},Q=J,X=function(){var T=C()(l()().mark(function r(i){var s;return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=v.ZP.loading("\u6B63\u5728\u66F4\u65B0"),e.prev=1,e.next=4,(0,I.dj)(i);case 4:return s(),v.ZP.success("\u66F4\u65B0\u6210\u529F"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),s(),v.ZP.error("\u66F4\u65B0\u5931\u8D25\uFF0C"+e.t0.message),e.abrupt("return",!1);case 14:case"end":return e.stop()}},r,null,[[1,9]])}));return function(i){return T.apply(this,arguments)}}(),Y=function(r){var i=r.oldData,s=r.visible,o=r.columns,e=r.onSubmit,f=r.onCancel;return i?(0,t.jsx)(V.Z,{destroyOnClose:!0,title:"\u66F4\u65B0",open:s,footer:null,onCancel:function(){f==null||f()},children:(0,t.jsx)(F.Z,{type:"form",columns:o,form:{initialValues:i},onSubmit:function(){var S=C()(l()().mark(function m(d){var R;return l()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,X(P()(P()({},d),{},{id:i.id}));case 2:R=g.sent,R&&(e==null||e(d));case 4:case"end":return g.stop()}},m)}));return function(m){return S.apply(this,arguments)}}()})}):(0,t.jsx)(t.Fragment,{})},k=Y,q=n(51042),_=n(6110),ee=n(42075),W=n(25043),ne=n(14726),re=function(){var r=(0,A.useState)(!1),i=b()(r,2),s=i[0],o=i[1],e=(0,A.useState)(!1),f=b()(e,2),S=f[0],m=f[1],d=(0,A.useRef)(),R=(0,A.useState)(),h=b()(R,2),g=h[0],z=h[1],te=function(){var p=C()(l()().mark(function u(y){var c,M;return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=v.ZP.loading("\u6B63\u5728\u5220\u9664"),y){a.next=3;break}return a.abrupt("return",!0);case 3:return a.prev=3,a.next=6,(0,I.Hh)({id:y.id});case 6:return c(),v.ZP.success("\u5220\u9664\u6210\u529F"),d==null||(M=d.current)===null||M===void 0||M.reload(),a.abrupt("return",!0);case 12:return a.prev=12,a.t0=a.catch(3),c(),v.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C"+a.t0.message),a.abrupt("return",!1);case 17:case"end":return a.stop()}},u,null,[[3,12]])}));return function(y){return p.apply(this,arguments)}}(),B=[{title:"id",dataIndex:"id",valueType:"text",hideInForm:!0,hideInSearch:!0},{title:"\u8D26\u53F7",dataIndex:"userAccount",valueType:"text"},{title:"\u7528\u6237\u540D",dataIndex:"userName",valueType:"text"},{title:"\u5934\u50CF",dataIndex:"userAvatar",valueType:"image",fieldProps:{width:70},hideInSearch:!0},{title:"\u7B80\u4ECB",dataIndex:"userProfile",valueType:"textarea",hideInSearch:!0},{title:"\u6743\u9650",dataIndex:"userRole",valueEnum:{user:{text:"\u7528\u6237"},admin:{text:"\u7BA1\u7406\u5458"}}},{title:"\u521B\u5EFA\u65F6\u95F4",sorter:!0,dataIndex:"createTime",valueType:"dateTime",hideInSearch:!0,hideInForm:!0},{title:"\u66F4\u65B0\u65F6\u95F4",sorter:!0,dataIndex:"updateTime",valueType:"dateTime",hideInSearch:!0,hideInForm:!0},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(u,y){return(0,t.jsxs)(ee.Z,{size:"middle",children:[(0,t.jsx)(W.Z.Link,{onClick:function(){z(y),m(!0)},children:"\u4FEE\u6539"}),(0,t.jsx)(W.Z.Link,{type:"danger",onClick:function(){return te(y)},children:"\u5220\u9664"})]})}}];return(0,t.jsxs)(_._z,{children:[(0,t.jsx)(F.Z,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:d,rowKey:"key",search:{labelWidth:120},toolBarRender:function(){return[(0,t.jsxs)(ne.ZP,{type:"primary",onClick:function(){o(!0)},children:[(0,t.jsx)(q.Z,{})," \u65B0\u5EFA"]},"primary")]},request:function(){var p=C()(l()().mark(function u(y,c,M){var D,a,x,G,L,Z,N;return l()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return x=(D=Object.keys(c))===null||D===void 0?void 0:D[0],G=(a=c==null?void 0:c[x])!==null&&a!==void 0?a:void 0,j.next=4,(0,I.D1)(P()(P()({},y),{},{sortField:x,sortOrder:G},M));case 4:return L=j.sent,Z=L.data,N=L.code,j.abrupt("return",{success:N===0,data:(Z==null?void 0:Z.records)||[],total:Number(Z==null?void 0:Z.total)||0});case 8:case"end":return j.stop()}},u)}));return function(u,y,c){return p.apply(this,arguments)}}(),columns:B}),(0,t.jsx)(Q,{visible:s,columns:B,onSubmit:function(){var u;o(!1),(u=d.current)===null||u===void 0||u.reload()},onCancel:function(){o(!1)}}),(0,t.jsx)(k,{visible:S,columns:B,oldData:g,onSubmit:function(){var u;m(!1),z(void 0),(u=d.current)===null||u===void 0||u.reload()},onCancel:function(){m(!1)}})]})},ae=re}}]);
